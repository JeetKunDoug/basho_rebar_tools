minimum_reviewers: 1
merge: true
merge_method: merge
# for OTP < 18 need the check_old profile added
# it would be preferable to do this dynamically
build_steps:
  # clean relevant profiles to ensure they succeed
  - rebar3 clean --all
  - rebar3 as prod clean --all
  - rebar3 as check clean --all
  - rebar3 as check,check_old clean --all
  - rebar3 as test clean --all
  - rebar3 as validate clean --all
  # compile relevant profiles to ensure they succeed
  - rebar3 as validate compile
  - rebar3 compile
  - rebar3 as prod compile
  - rebar3 as check compile
  - rebar3 as check,check_old compile
  - rebar3 as test compile
  # these are the real tests
  - rebar3 as check xref
  - rebar3 as check,check_old dialyzer
  - rebar3 eunit
  - rebar3 edoc
org_mode: true
timeout: 1200
